syntax = 'proto3';
package Laana;

import 'entity/message.proto';
import 'action/wrapper.proto';
import 'event/wrapper.proto';

message LaanaDataWrapper {
  oneof data {
    ActionPing actionPing = 1;
    ActionPong actionPong = 2;
    EventWrapper event = 3;
    Message message = 4;

    ClientSideHandshake clientSideHandshake = 11;
    ServerSideHandshake serverSideHandshake = 12;

    ExtendedData extendedData = 99;
  }
}

message ExtendedData {
  string key = 1;
  bytes value = 2;
}

message ServerSideHandshake {
  string serverVersion = 1;
  Result result = 2;

  enum Result {
    success = 0;
    wrongToken = 1;
    unmatchedLaanaVersion = 2;
  }
}

message ClientSideHandshake {
  string clientVersion = 1;

  optional string token = 11;

  optional bytes extendedHandshakeData = 999;
}